---
icon: pen-to-square
date: 2024-03-27
category:
  - 篇章2
tag:
  -
star: true
---

### 1:vue3的时候ref为什么要使用.value属性？ 如果是你有什么办法更好的实现它吗？
 #### .value属性, 首先我们要知道vue3 是基于proxy 和 reflect 实现响应式数据的，proxy能代理的东西是什么？ 
 #### 答案是 对象， 那么就不难理解为什么 ref要.value了
 ##### 至于更好的实现ref, 其实就是.value 访问太麻烦,容易混淆,也有人提出ref sugar 即(ref语法糖),也就是去除ref .value,如何去除

```js
  // 核心就是 对set 和 get 进行操作
  get (target,key){
    if(key === 'value'){
      return target.value
    }
    return target.value[key]
  }
```

#### 核心内容如下,如果vue 模板编译的时候会自动获取value,所以要判断key 为value的情况下,最后return target.value[key]  则是我们正常再js里面不通过 value 进行访问的逻辑
```js
  // 核心就是 对set 和 get 进行操作

  function magicRef(initialValue){
    const reactive = ref(initialValue)
    const proxy = new proxy(reactive,{
      get(target,key){
        if(key === 'value'){
          return target.value
        }
        return target.value[key]
      }
      set(target,key,value){
        if(key === 'value'){
          target.value = value
        }else{
          target.value[key] = value
        }
        return true
      }
    })
    return proxy
  }
```
 ##### [引用文章](https://juejin.cn/post/7226540105698771003?searchId=20231002075204FF098F426246DB507E79)


### 2:SSR渲染流程是什么样？
  ##### ①:客户端发送URL请求到服务端
  ##### ②:服务端查询数据库
  ##### ③:拿到数据,组合好页面
  ##### ④:服务端返回整个DOM结构给客户端

### 3:如何解决页面刷新丢失数据的问题？
  ##### 通过本地储存解决 localStorage 或 sessionStorage 存储 或通过插件 vuex-persistedstate 解决